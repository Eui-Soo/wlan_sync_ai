clc
clear
close all

SNR=-15:18;
mse=zeros(1,length(SNR));
% ai_mse=[5121.78173828125,...
%  667.8434448242188,...
%  94.28944396972656,...
%  35.550357818603516,...
%  16.818580627441406,...
%  8.256734848022461,...
%  4.54178524017334,...
%  2.638676166534424,...
%  1.7053700685501099,...
%  1.2399353981018066,...
%  0.9829896688461304,...
%  0.8791331052780151];
ai_mse=[6446.82958984375, 4077.536376953125, 2234.890380859375, 1168.0865478515625, 462.5369873046875, 236.02098083496094, 131.1428985595703, 87.39996337890625, 65.94683074951172, 51.186946868896484, 39.448116302490234, 30.034616470336914, 23.300819396972656, 17.8460750579834, 14.053069114685059, 10.743083000183105, 8.062355041503906, 6.641705513000488, 5.04822301864624, 3.899951934814453, 3.0908117294311523, 2.5408949851989746, 1.9778839349746704, 1.6064119338989258, 1.348739504814148, 1.1197776794433594, 0.9376779198646545, 0.797905445098877, 0.6875746846199036, 0.6065921783447266, 0.537885308265686, 0.48144546151161194, 0.4416331946849823, 0.4028240144252777];
for loop=1:length(SNR)
   S=sprintf('wlan_test_conventional_SNR(%d)_v3.mat',SNR(loop));
   load(S)
   mse(loop)=mean((con_cfo/1e3-Test_cfo_label/1e3).^2);
    
end
figure('position',[0 0 450 350])
semilogy(SNR,sqrt(ai_mse)*1e3,'bo-','linewidth',2,'MarkerIndices',[6:2:29,30])
hold on
semilogy(SNR,sqrt(mse)*1e3,'r^-','linewidth',2,'MarkerIndices',[6:2:29,30])
legend('Proposed','Conventional')
xlabel('SNR(dB)')
ylabel('Root Mean Square Error(Hz)')
grid on
xticks([-10:2:15])
axis([-10 15 1e2 1e6])